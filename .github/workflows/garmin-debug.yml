from datetime import datetime, timedelta
from garminconnect import Garmin
import os
import json

garmin = Garmin(os.getenv("GARMIN_EMAIL"), os.getenv("GARMIN_PASSWORD"))
garmin.login()

date = (datetime.today() - timedelta(days=1)).strftime("%Y-%m-%d")

print("ğŸ§ª Sleep Data:")
print(json.dumps(garmin.get_sleep_data(date), indent=2))

print("\nğŸ§ª Wellness Data:")
print(json.dumps(garmin.get_wellness_data(date), indent=2))

print("\nğŸ§ª Stress Data:")
print(json.dumps(garmin.get_stress_data(date), indent=2))

print("\nğŸ§ª HRV Data:")
try:
    print(json.dumps(garmin.get_heart_rate_variability(date), indent=2))
except Exception as e:
    print(f"âŒ HRV not available or endpoint failed: {e}")
